{
  "compatibilities": ["EC2"],
  "containerDefinitions": [
    {
      "cpu": 0,
      "environment": [
        { "name": "NODE_ENV", "value": "production" },
        {"name" : "HOST", "value" : "0.0.0.0"},
        { "name": "PORT", "value": "3000" },
        { "name": "DEV_INSECURE_COOKIES", "value": "false" },
        { "name": "OAUTH_GOOGLE_REDIRECT_URI", "value": "https://taco4graphnode.online/auth/google/callback" },
        { "name": "OAUTH_APPLE_REDIRECT_URI", "value": "https://taco4graphnode.online/auth/apple/callback" },
        { "name": "AWS_REGION", "value": "ap-northeast-2" },
        { "name": "SQS_REQUEST_QUEUE_URL", "value": "https://sqs.ap-northeast-2.amazonaws.com/954976324655/taco-graphnode-request-graph-sqs" },
        { "name": "SQS_RESULT_QUEUE_URL", "value": "https://sqs.ap-northeast-2.amazonaws.com/954976324655/taco-graphnode-response-graph-sqs" },
        { "name": "S3_PAYLOAD_BUCKET", "value": "taco-graphnode-graphdata-s3" },
        { "name": "S3_FILE_BUCKET", "value": "taco-graphnode-filedata-chat-and-note-s3" },
        { "name": "NEO4J_URI", "value": "bolt://localhost:7687" },
        { "name": "NEO4J_USERNAME", "value": "neo4j" },
        { "name": "CHROMA_API_URL", "value": "http://localhost:8000" }
      ],
      "secrets": [
        { "name": "DATABASE_URL", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:DATABASE_URL::" },
        { "name": "MONGODB_URL", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:MONGODB_URL::" },
        { "name": "REDIS_URL", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:REDIS_URL::" },
        { "name": "SESSION_SECRET", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:SESSION_SECRET::" },
        { "name": "JWT_SECRET", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:JWT_SECRET::" },
        { "name": "OAUTH_GOOGLE_CLIENT_ID", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:OAUTH_GOOGLE_CLIENT_ID::" },
        { "name": "OAUTH_GOOGLE_CLIENT_SECRET", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:OAUTH_GOOGLE_CLIENT_SECRET::" },
        { "name": "OAUTH_APPLE_TEAM_ID", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:OAUTH_APPLE_TEAM_ID::" },
        { "name": "OAUTH_APPLE_KEY_ID", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:OAUTH_APPLE_KEY_ID::" },
        { "name": "OAUTH_APPLE_CLIENT_ID", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:OAUTH_APPLE_CLIENT_ID::" },
        { "name": "OAUTH_APPLE_PRIVATE_KEY", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:OAUTH_APPLE_PRIVATE_KEY::" },
        { "name": "NEO4J_PASSWORD", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:NEO4J_PASSWORD::" },
        {"name" : "OPENAI_ASSISTANT_ID", "valueFrom": "arn:aws:secretsmanager:ap-northeast-2:954976324655:secret:taco4/graphnode/mvp-vpNf7c:OPENAI_ASSISTANT_ID::"}
      ],
      "essential": true,
      "image": "954976324655.dkr.ecr.ap-northeast-2.amazonaws.com/taco4/graphnode:latest_10",
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/taco-4-graphnode-task",
          "awslogs-create-group": "true",
          "awslogs-region": "ap-northeast-2",
          "awslogs-stream-prefix": "ecs"
        }
      },
      "memory": 850,
      "memoryReservation": 512,
      "mountPoints": [],
      "name": "taco4_graphnode_container",
      "portMappings": [
        {
          "appProtocol": "http",
          "containerPort": 3000,
          "hostPort": 80,
          "name": "taco4_graphnode_port",
          "protocol": "tcp"
        }
      ],

      "systemControls": [],
      "volumesFrom": []
    }
  ],
  "cpu": "900",
  "enableFaultInjection": false,
  "executionRoleArn": "arn:aws:iam::954976324655:role/ecsTaskExecutionRole",
  "family": "taco-4-graphnode-task",
  "memory": "900",
  "networkMode": "bridge",
  "placementConstraints": [],
  "registeredAt": "2025-11-29T12:49:46.213Z",
  "registeredBy": "arn:aws:iam::954976324655:root",
  "requiresAttributes": [
    {
      "name": "com.amazonaws.ecs.capability.logging-driver.awslogs"
    },
    {
      "name": "ecs.capability.execution-role-awslogs"
    },
    {
      "name": "com.amazonaws.ecs.capability.ecr-auth"
    },
    {
      "name": "com.amazonaws.ecs.capability.docker-remote-api.1.19"
    },
    {
      "name": "ecs.capability.secrets.asm.environment-variables"
    },
    {
      "name": "com.amazonaws.ecs.capability.docker-remote-api.1.21"
    },
    {
      "name": "com.amazonaws.ecs.capability.task-iam-role"
    },
    {
      "name": "ecs.capability.execution-role-ecr-pull"
    },
    {
      "name": "com.amazonaws.ecs.capability.docker-remote-api.1.29"
    }
  ],
  "requiresCompatibilities": ["EC2"],
  "revision": 15,
  "runtimePlatform": {
    "cpuArchitecture": "X86_64",
    "operatingSystemFamily": "LINUX"
  },
  "status": "ACTIVE",
  "taskDefinitionArn": "arn:aws:ecs:ap-northeast-2:954976324655:task-definition/taco-4-graphnode-task:15",
  "taskRoleArn": "arn:aws:iam::954976324655:role/ecsTaskExecutionRole",
  "volumes": [],
  "tags": []
}
